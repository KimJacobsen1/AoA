<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Age of Adventure – Character Creator</title>
  <style>
    body { font-family: "Garamond", serif; background: #f2efe6; margin: 20px; }
    h1 { text-align: center; }
    .step { display:none; border: 2px solid #444; padding: 15px; margin: 15px 0; border-radius: 10px; background: white; }
    .active { display:block; }
    button { margin: 5px; padding: 8px 12px; border:none; border-radius:5px; cursor:pointer; }
    .next-btn { background:#333; color:#fff; }
    .buy-btn { background:#666; color:#fff; padding:4px 8px; }
    .print-btn { background:#4CAF50; color:#fff; padding:8px 12px; }
    .sheet { border: 3px solid #333; padding: 15px; margin-top: 20px; border-radius: 12px; background:#fff; }
    ul { margin:0; padding-left:20px; }
  </style>
</head>
<body>

<h1>Age of Adventure – Character Creator</h1>

<!-- Step 1 -->
<div class="step active" id="step1">
  <h2>Step 1: Community & Role</h2>
  <label>Community:
    <select id="community">
      <option value="">-- Select --</option>
      <option>Dwarf</option><option>Elf</option><option>Goblin</option>
      <option>Halfling</option><option>Human</option><option>Orc</option>
    </select>
  </label>
  <label>Role:
    <select id="role">
      <option value="">-- Select --</option>
      <option>Archer</option><option>Barbarian</option><option>Cleric</option>
      <option>Rogue</option><option>Warrior</option><option>Wizard</option>
    </select>
  </label>
  <button class="next-btn" onclick="nextStep(2)">Next</button>
</div>

<!-- Step 2 -->
<div class="step" id="step2">
  <h2>Step 2: Proficiency</h2>
  <p>Choose a number 2–5:</p>
  <input type="number" id="prof" min="2" max="5">
  <button class="next-btn" onclick="nextStep(3)">Next</button>
</div>

<!-- Step 3 -->
<div class="step" id="step3">
  <h2>Step 3: Name</h2>
  <input type="text" id="name" placeholder="Hero Name">
  <button class="next-btn" onclick="nextStep(4)">Next</button>
</div>

<!-- Step 4 -->
<div class="step" id="step4">
  <h2>Step 4: Homeland</h2>
  <input type="text" id="home" placeholder="Homeland">
  <button class="next-btn" onclick="nextStep(5)">Next</button>
</div>

<!-- Step 5 -->
<div class="step" id="step5">
  <h2>Step 5: Goal</h2>
  <input type="text" id="goal" placeholder="Hero Goal">
  <button class="next-btn" onclick="nextStep(6)">Next</button>
</div>

<!-- Step 6 -->
<div class="step" id="step6">
  <h2>Step 6: Appearance</h2>
  <textarea id="app" placeholder="Describe your hero..."></textarea>
  <button class="next-btn" onclick="nextStep(7)">Next</button>
</div>

<!-- Step 7: Languages -->
<div class="step" id="step7">
  <h2>Languages</h2>
  <p>All heroes know <strong>Common</strong>. Humans may add 2 extra. Tick as many as needed:</p>
  <div id="languageList">
    <label><input type="checkbox" value="Dwarvish"> Dwarvish</label><br>
    <label><input type="checkbox" value="Elvish"> Elvish</label><br>
    <label><input type="checkbox" value="Goblin Tongue"> Goblin Tongue</label><br>
    <label><input type="checkbox" value="Halfling Speech"> Halfling Speech</label><br>
    <label><input type="checkbox" value="Orcish"> Orcish</label><br>
    <label><input type="checkbox" value="Other"> Other (specify)</label><br>
  </div>
  <button class="next-btn" onclick="nextStep(8)">Next</button>
</div>

<!-- Step 8: Equipment -->
<div class="step" id="step8">
  <h2>Equipment</h2>
  <p><strong>Pouch:</strong> <span id="gold">-</span> GP | <span id="silver">-</span> SP</p>
  <h3>1 GP Items</h3><div id="shop1"></div>
  <h3>3 GP Items</h3><div id="shop3"></div>
  <h3>6 GP Items</h3><div id="shop6"></div>
  <button class="print-btn" onclick="window.print()">Print / Save PDF</button>
</div>

<!-- Character Sheet -->
<div class="sheet">
  <h2>Character Sheet</h2>
  <p><strong>Name:</strong> <span id="outName">-</span></p>
  <p><strong>Homeland:</strong> <span id="outHome">-</span></p>
  <p><strong>Community:</strong> <span id="outCommunity">-</span></p>
  <p><strong>Role:</strong> <span id="outRole">-</span></p>
  <p><strong>Goal:</strong> <span id="outGoal">-</span></p>
  <p><strong>Appearance:</strong> <span id="outApp">-</span></p>
  <hr>
  <p><strong>Proficiency:</strong> <span id="outProf">-</span></p>
  <p><strong>Stamina:</strong> <span id="outStamina">-</span></p>
  <p><strong>Hero Points:</strong> <span id="outHero">-</span></p>
  <p><strong>Languages:</strong> <span id="outLang">Common</span></p>
  <p><strong>Skills:</strong></p><ul id="outSkills"></ul>
  <div id="spellBlock"></div>
  <p><strong>Equipment:</strong></p><ul id="outGear"></ul>
</div>

<script>
function rollDice(s){ return Math.floor(Math.random()*s)+1; }
let gp=12+rollDice(6), sp=rollDice(6), gear=["Clothing","Backpack"];

const skills = {
  Dwarf:["Detect","Teamwork"], Elf:["Acrobatics","Pathfinder"], Goblin:["Darksee","Underground"],
  Halfling:["Hide","Willpower"], Human:["Parley","Languages (+2)"], Orc:["Athletics","Resilience"],
  Archer:["Launched Weapons","1H Throw"], Barbarian:["2H Weapons","2H Throw"],
  Cleric:["Religion"], Rogue:["Sneak","Tinker"], Warrior:["1H Weapons","Unarmed"],
  Wizard:["Arcana"]
};

const spellsArcane=["Darksee","Levitate","Missile","Protection","Speak","Teleport"];
const spellsHoly=["Bless","Divine","Heal","Light","Smite","Ward"];

const shop={
  gp1:["Acid","Caltrops","Candles (6)","Fire Pot","Grappling Hook","Oil (6)","Pitons (6)","Provisions (6)","Rope","Small Mirror","Tinderbox","Torches (6)"],
  gp3:["Animal Companion (Small)","Armor","Heavy Armor","Arrows (6)","Cart","Lantern","Net","Bolas","Shield","Heavy Shield","Spyglass","Throwing Blades (6)","Tinker Tools","Specialist Tools","Weapon (1H/2H)","Silver Weapon"],
  gp6:["Healing Kit/Herbs (6)","Hireling","Holy Water","Magic Recharge +1","Poison","Potion","Scroll","Spellcasting Item"]
};

// Notes for items
const itemNotes = {
  "Armor":"+1 Stamina; half Move when climbing/swimming",
  "Heavy Armor":"+1 extra Stamina; -1D Dodge",
  "Shield":"Block: +1D; may negate all DMG once/round",
  "Heavy Shield":"Block: auto-negate 1 attack/round if successful",
  "Silver Weapon":"+1 DMG vs Undead/Evil; breaks on 1/6 roll",
  "Cart":"-1D penalty when pulling load",
  "Animal Companion (Small)":"Stamina 1; carry 1#; pull 2#",
  "Animal Companion (Medium)":"Stamina 2; carry 3#; pull 6#",
  "Animal Companion (Large)":"Stamina 3; carry 1P; pull 2P",
  "Hireling":"Stamina 2; carries 6#; 1 Community + 1 Role skill"
};

function nextStep(n){
  document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
  updateSheet();
}

function initShop(){
  makeShop("shop1",shop.gp1,1);
  makeShop("shop3",shop.gp3,3);
  makeShop("shop6",shop.gp6,6);
}
function makeShop(divID,list,cost){
  let html="";
  list.forEach(it=>{
    html+=`<button class="buy-btn" onclick="buyItem('${it}',${cost})">${it} (${cost} GP)</button> `;
  });
  document.getElementById(divID).innerHTML=html;
}

function buyItem(name,cost){
  if(gp>=cost){
    gp-=cost; gear.push(formatItem(name)); updateSheet();
  } else {
    if(confirm(`Not enough GP (${gp} left). Buy ${name} anyway and go into debt?`)){
      gp-=cost; gear.push(formatItem(name)); updateSheet();
    }
  }
}

function formatItem(name){
  return itemNotes[name] ? `${name} (${itemNotes[name]})` : name;
}

function updateSheet(){
  let name=document.getElementById("name")?.value||"-";
  let home=document.getElementById("home")?.value||"-";
  let goal=document.getElementById("goal")?.value||"-";
  let app=document.getElementById("app")?.value||"-";
  let comm=document.getElementById("community")?.value||"-";
  let role=document.getElementById("role")?.value||"-";
  let prof=parseInt(document.getElementById("prof")?.value)||"-";
  let stamina=(prof!="-")?prof:"-";
  let hero=(prof!="-")?rollDice(6):"-";

  // Languages
  let langs=["Common"];
  if(comm==="Human") langs.push("2 extra");
  document.querySelectorAll("#languageList input:checked").forEach(cb=>langs.push(cb.value));

  // Skills
  let skillList=(skills[comm]||[]).concat(skills[role]||[]).map(s=>`<li>${s}</li>`).join("");

  // Spells
  let spellBlock=document.getElementById("spellBlock");
  if(role==="Wizard") spellBlock.innerHTML="<p><strong>Arcane Spells:</strong></p><ul>"+spellsArcane.map(s=>"<li>"+s+"</li>").join("")+"</ul>";
  else if(role==="Cleric") spellBlock.innerHTML="<p><strong>Holy Spells:</strong></p><ul>"+spellsHoly.map(s=>"<li>"+s+"</li>").join("")+"</ul>";
  else spellBlock.innerHTML="";

  // Output
  document.getElementById("outName").innerText=name;
  document.getElementById("outHome").innerText=home;
  document.getElementById("outGoal").innerText=goal;
  document.getElementById("outApp").innerText=app;
  document.getElementById("outCommunity").innerText=comm;
  document.getElementById("outRole").innerText=role;
  document.getElementById("outProf").innerText=prof;
  document.getElementById("outStamina").innerText=stamina;
  document.getElementById("outHero").innerText=hero;
  document.getElementById("outLang").innerText=langs.join(", ");
  document.getElementById("outSkills").innerHTML=skillList;
  document.getElementById("outGear").innerHTML=gear.map(g=>`<li>${g}</li>`).join("");
  document.getElementById("gold").innerText=gp;
  document.getElementById("silver").innerText=sp;
}

initShop();
updateSheet();
</script>

</body>
</html>
